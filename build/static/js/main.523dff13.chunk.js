(this["webpackJsonpyandex-burger"]=this["webpackJsonpyandex-burger"]||[]).push([[0],{109:function(e,t,n){e.exports={loader:"loader_loader__31U88"}},110:function(e,t,n){e.exports={loader:"layout_loader__3LC0M"}},111:function(e,t,n){e.exports={form:"form-registration_form__3PTfl"}},112:function(e,t,n){e.exports={orders:"profile-orders_orders__1ifQC"}},113:function(e,t,n){e.exports={block:"not-fount_block__2GC7d",link:"not-fount_link__1cTgj"}},114:function(e,t,n){e.exports={modal:"order-details_modal__ivIzu"}},115:function(e,t,n){e.exports={details:"home_details__CL4tF"}},130:function(e,t,n){},19:function(e,t,n){e.exports={form:"registration_form__4c7vV",footer:"registration_footer__1lqvC",paragraph:"registration_paragraph__2pwYz",link:"registration_link__2MU_O"}},20:function(e,t,n){e.exports={nav:"profile-nav_nav__3ZoIQ",list:"profile-nav_list__20IOS",item:"profile-nav_item__1OiQx",link:"profile-nav_link__fy5AN",active:"profile-nav_active__2-2su",paragraph:"profile-nav_paragraph__1pR0c"}},212:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),i=n(25),s=n(34),o=n.n(s),l=(n(130),n(6)),d=n(9),u=n(11),j=n(3),O=n.n(j),_=n(5),b=n(22),m=n.n(b);!function(e){e.HOME="/",e.LOGIN="/login",e.REGISTER="/register",e.FORGOT_PASSWORD="/forgot-password",e.RESET_PASSWORD="/reset-password",e.PROFILE="/profile",e.PROFILE_ORDERS="/profile/orders",e.PROFILE_ORDERS_ID="/profile/orders/:id",e.INGREDIENT_ID="/ingredient/:id",e.ORDERS="/orders",e.NOT_FOUNT="/not-fount",e.FEED="/feed",e.FEED_ID="/feed/:id"}(r||(r={}));var p=n(0),x=function(){var e=Object(d.j)().path;return Object(p.jsx)("header",{className:O()(m.a.header),children:Object(p.jsxs)("div",{className:O()("pb-4 pt-4",m.a.header__content),children:[Object(p.jsxs)("nav",{className:m.a.menu,children:[Object(p.jsxs)(l.c,{activeClassName:m.a.active,className:O()(m.a.link,"text_color_inactive"),to:r.HOME,exact:!0,children:[Object(p.jsx)(_.BurgerIcon,{type:e===r.HOME?"primary":"secondary"}),Object(p.jsx)("p",{className:"text text_type_main-default pl-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(p.jsxs)(l.c,{activeClassName:m.a.active,className:O()(m.a.link,"text_color_inactive"),to:{pathname:r.FEED,state:[{path:r.FEED,url:r.FEED,title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}]},children:[Object(p.jsx)(_.ListIcon,{type:e.startsWith(r.FEED)?"primary":"secondary"}),Object(p.jsx)("p",{className:"text text_type_main-default pl-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(p.jsx)(_.Logo,{}),Object(p.jsxs)(l.c,{activeClassName:m.a.active,className:O()(m.a.link,"text_color_inactive"),to:{pathname:r.PROFILE,state:[{path:"/profile",url:"/profile",title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",isRedirect:!0}]},children:[Object(p.jsx)(_.ProfileIcon,{type:e.startsWith(r.PROFILE)?"primary":"secondary"}),Object(p.jsx)("p",{className:"text text_type_main-default pl-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},f=n(109),h=n.n(f),E=function(){return Object(p.jsxs)("div",{className:h.a.loader,children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})},N=n(110),g=n.n(N),v=function(e){var t=e.order,n=e.ingredient,r=e.user;return t.ordersLoading||n.ingredientsRequest||!r.isInitialized},y=function(e){var t=e.children,n=Object(i.c)(v);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(x,{}),n?Object(p.jsx)("div",{className:g.a.loader,children:Object(p.jsx)(E,{})}):t]})},I=n(19),S=n.n(I),T=n(2),R=n(26),C=n(111),D=n.n(C),k=["children"],G=function(e){var t=e.children,n=Object(R.a)(e,k);return Object(p.jsx)("form",Object(T.a)(Object(T.a)({className:D.a.form,autoComplete:"off"},n),{},{children:t}))},L="norma.nomoreparties.space",A="".concat("https://").concat(L,"/api"),F="".concat("wss://").concat(L,"/orders"),W=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430")};function w(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var M=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.expires;if("number"==typeof a&&a){var c=new Date;c.setTime(c.getTime()+1e3*a),a=r.expires=c}a&&"function"===typeof(null===(n=a)||void 0===n?void 0:n.toUTCString)&&(r.expires=a.toUTCString());var i=e+"="+(t=encodeURIComponent(t));for(var s in r){i+="; "+s;var o=r[s];!0!==o&&(i+="="+o)}document.cookie=i};var U=function(e){return fetch("".concat(A,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(W)},P=function(e){return fetch("".concat(A,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:w("accessToken")||""},body:JSON.stringify({ingredients:e})}).then(W)},B=function(e){return fetch("".concat(A,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(W)},z=function(e){return fetch("".concat(A,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(W)},H=function(){return fetch("".concat(A,"/ingredients")).then(W)},Q=function(e){return fetch("".concat(A,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(W)},q=function(e){return fetch("".concat(A,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(W)},J=function(e){return fetch("".concat(A,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:e}}).then(W)},X=function(e,t){return e.some((function(e){return e.url===t}))},V=n(13),Y=n(12);function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(Y.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({}),s=Object(Y.a)(i,2),o=s[0],l=s[1],d=Object(a.useState)(!1),u=Object(Y.a)(d,2),j=u[0],O=u[1],_=function(e){var t=e.target,n=t.name,a=t.value,i=t.validationMessage;c(Object(T.a)(Object(T.a)({},r),{},Object(V.a)({},n,a))),l(Object(T.a)(Object(T.a)({},o),{},Object(V.a)({},n,i)))},b=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(e),l(t),O(n)}),[c,l,O]);return{values:r,handleChange:_,errors:o,isValid:j,resetForm:b}}var K,$=function(){var e=Z(),t=e.values,n=e.handleChange,c=Object(d.g)(),i=Object(d.h)().state,s=Object(d.j)(),o=s.url,j=s.path;Object(a.useEffect)((function(){i&&!X(i,o)&&c.replace({state:[].concat(Object(u.a)(i),[{path:j,url:o,title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}])})}),[j,o,i,c]);var b=Object(a.useCallback)((function(e){e.preventDefault(),B(t).then((function(){return c.push(r.LOGIN)})).catch((function(e){return console.log(e)}))}),[t,c]);return Object(p.jsxs)(y,{children:[Object(p.jsxs)(G,{onSubmit:b,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(_.Input,{name:"name",type:"text",placeholder:"\u0418\u043c\u044f",value:t.name||"",onChange:n}),Object(p.jsx)(_.Input,{name:"email",type:"email",placeholder:"E-mail",value:t.email||"",onChange:n}),Object(p.jsx)(_.PasswordInput,{name:"password",value:t.password,onChange:n}),Object(p.jsx)("div",{children:Object(p.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(p.jsx)("div",{className:O()(S.a.footer,"mt-20"),children:Object(p.jsxs)("div",{className:S.a.paragraph,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-1",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(p.jsx)(l.b,{className:O()("text text_type_main-default",S.a.link),to:r.LOGIN,children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},ee=function(){var e=Z(),t=e.values,n=e.handleChange,c=Object(d.g)(),i=Object(d.h)().state,s=Object(d.j)(),o=s.url,j=s.path;Object(a.useEffect)((function(){i&&!X(i,o)&&c.replace({state:[].concat(Object(u.a)(i),[{path:j,url:o,title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}])})}),[j,o,i,c]);var b=Object(a.useCallback)((function(e){e.preventDefault(),z(t).then((function(){c.push({pathname:r.RESET_PASSWORD,state:i})})).catch((function(e){return console.log(e)}))}),[c,t,i]);return Object(p.jsxs)(y,{children:[Object(p.jsxs)(G,{onSubmit:b,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(_.Input,{type:"email",name:"email",placeholder:"E-mail",onChange:n,value:t.email||""}),Object(p.jsx)("div",{children:Object(p.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(p.jsx)("div",{className:O()(S.a.footer,"mt-20"),children:Object(p.jsxs)("div",{className:S.a.paragraph,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-1",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(l.b,{className:O()("text text_type_main-default",S.a.link),to:r.LOGIN,children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},te=function(){var e=Z(),t=e.values,n=e.handleChange,c=Object(d.g)(),i=Object(d.h)().state;(null===i||void 0===i?void 0:i.length)&&i[i.length-1].path===r.FORGOT_PASSWORD||c.push({pathname:r.LOGIN,state:i});var s=Object(a.useCallback)((function(e){e.preventDefault(),c.push(r.LOGIN)}),[c]);return Object(p.jsxs)(y,{children:[Object(p.jsxs)(G,{onSubmit:s,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(_.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",icon:"CurrencyIcon",value:t.password,onChange:n}),Object(p.jsx)(_.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:t.code,onChange:n}),Object(p.jsx)("div",{children:Object(p.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(p.jsx)("div",{className:O()(S.a.footer,"mt-20"),children:Object(p.jsxs)("div",{className:S.a.paragraph,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-1",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(l.b,{className:O()("text text_type_main-default",S.a.link),to:r.LOGIN,children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},ne=n(41),re=n.n(ne),ae=n(20),ce=n.n(ae);!function(e){e.INIT_USER="INIT_USER",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT"}(K||(K={}));var ie,se=function(){return{type:K.INIT_USER}},oe=function(e){return{type:K.LOGIN,payload:e}},le=function(){return{type:K.LOGOUT}},de=function(){return function(e){var t=localStorage.getItem("refreshToken")||"";q({token:t}).then((function(t){if(!t.success)return Promise.reject("error");M("accessToken",null,{expires:-1}),localStorage.removeItem("refreshToken"),e(le())})).catch((function(){return e(le())}))}},ue=function(){return Object(i.b)()},je=i.c,Oe=function(){var e=ue(),t=Object(a.useCallback)((function(){e(de())}),[e]);return Object(p.jsxs)("nav",{className:ce.a.nav,children:[Object(p.jsxs)("ul",{className:ce.a.list,children:[Object(p.jsx)("li",{className:ce.a.item,children:Object(p.jsx)(l.c,{activeClassName:ce.a.active,className:O()("text text_type_main-medium text_color_inactive",ce.a.link),to:{pathname:r.PROFILE,state:[{isRedirect:!0,path:"/profile",title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",url:"/profile"}]},exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(p.jsx)("li",{className:ce.a.item,children:Object(p.jsx)(l.c,{activeClassName:ce.a.active,className:O()("text text_type_main-medium text_color_inactive",ce.a.link),to:{pathname:r.PROFILE_ORDERS,state:[{isRedirect:!0,path:"/profile/orders",title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",url:"/profile/orders"}]},exact:!0,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(p.jsx)("li",{className:ce.a.item,children:Object(p.jsx)("p",{className:O()("text text_type_main-medium text_color_inactive",ce.a.link),onClick:t,children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(p.jsx)("p",{className:O()("text text_type_main-default text_color_inactive mt-20",ce.a.paragraph),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},_e=function(e){return e.user.user},be=function(e){return e.user.isInitialized},me=function(){var e=je(_e)||{},t=e.name,n=void 0===t?"":t,r=e.email,c=void 0===r?"":r,i=Z({name:n,email:c,password:"ffff"}),s=i.values,o=i.handleChange,l=i.resetForm,j=Object(a.useState)(!1),b=Object(Y.a)(j,2),m=b[0],x=b[1],f=Object(d.g)(),h=Object(d.h)().state,E=Object(d.j)(),N=E.url,g=E.path;Object(a.useEffect)((function(){h&&!X(h,N)&&f.replace({state:[].concat(Object(u.a)(h),[{path:g,url:N,title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}])})}),[g,N,h,f]);var v=Object(a.useCallback)((function(){l({name:n,email:c,password:"ffff"}),x(!1)}),[c,n,l]),y=Object(a.useCallback)((function(e){e.preventDefault(),console.log(s)}),[s]),I=Object(a.useCallback)((function(){l(Object(T.a)(Object(T.a)({},s),{},{password:""})),x(!0)}),[s,l]);return Object(p.jsxs)("form",{className:O()(re.a.form,"ml-15"),onSubmit:y,children:[Object(p.jsx)(_.Input,{name:"name",type:"text",placeholder:"\u0418\u043c\u044f",disabled:!m,icon:"EditIcon",value:s.name||"",onChange:o,onIconClick:I}),Object(p.jsx)(_.Input,{name:"email",type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",disabled:!m,icon:"EditIcon",value:s.email||"",onChange:o,onIconClick:I}),Object(p.jsx)(_.Input,{name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:!m,icon:"EditIcon",value:s.password||"",onChange:o,onIconClick:I}),Object(p.jsxs)("div",{className:re.a.footer,children:[Object(p.jsx)(_.Button,{type:"secondary",size:"medium",onClick:v,disabled:!m,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",disabled:!m,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},pe=n(112),xe=n.n(pe),fe=n(56),he=n.n(fe),Ee=function(e){return e.ingredient},Ne=function(e){return e.ingredient.ingredients.reduce((function(e,t){return e[t._id]=t,e}),{})},ge=n(38),ve=n.n(ge),ye=(n(210),n(23)),Ie=n.n(ye),Se=n(35),Te=n.n(Se),Re=["className","zIndex","count","isLast"],Ce=function(e){var t=e.className,n=e.zIndex,r=e.count,a=e.isLast,c=Object(R.a)(e,Re);return Object(p.jsxs)("div",{className:O()(Te.a.avatar,t),style:{zIndex:n},children:[Object(p.jsx)("div",{className:Te.a.background,children:Object(p.jsx)("img",Object(T.a)({className:O()(Te.a.image,Object(V.a)({},Te.a.last,a)),alt:"\u0410\u0432\u0430\u0442\u0430\u0440"},c))}),!!r&&Object(p.jsxs)("p",{className:O()(Te.a.count,"text text_type_main-default"),children:["+",r]})]})},De=Object(a.memo)((function(e){var t=e.order,n=e.list,r=e.size,c=e.pachName,i=t._id,s=t.createdAt,o=t.ingredients,d=t.number,u=Object(a.useMemo)((function(){return o.reduce((function(e,t){var r;return e+((null===(r=n[t])||void 0===r?void 0:r.price)||0)}),0)}),[o,n]),j=Object(a.useMemo)((function(){return o.filter((function(e,t){return t<5&&e}))}),[o]),b=Object(a.useMemo)((function(){if(o.length>5){var e=o.length-5,t=n[o[o.length-e]]||{},r=t.image,a=t.name,c=e>1;return Object(p.jsx)(Ce,{className:Ie.a.indent,src:r,alt:a,isLast:c,count:c?e:0})}return null}),[o,n]);return Object(p.jsx)(l.b,{className:Ie.a.link,to:{pathname:"".concat(c,"/").concat(i),state:[{isRedirect:!0,path:c,title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0437\u0430\u043a\u0430\u0437\u0435",url:c}]},children:Object(p.jsxs)("li",{className:O()(Ie.a.order,"p-6"),children:[Object(p.jsxs)("div",{className:Ie.a.header,children:[Object(p.jsxs)("p",{className:"text text_type_digits-default",children:["#",d]}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"".concat(ve()(s).calendar()," i-GMT+3")})]}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-6",children:"Interstellar \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)("p",{className:O()("text text_type_main-default mt-2",Object(V.a)({},Ie.a.hidden,"small"===r)),children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(p.jsxs)("div",{className:O()(Ie.a.footer,"mt-7"),children:[Object(p.jsxs)("ul",{className:Ie.a.ingredients,children:[j.map((function(e,t){var r=n[e],a=r.image,c=r.name;return Object(p.jsx)(Ce,{className:Ie.a.indent,zIndex:o.length-t,src:a,alt:c},t)})),b]}),Object(p.jsxs)("div",{className:Ie.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-default mr-2",children:u}),Object(p.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},i)})),ke=Object(a.memo)((function(e){var t,n,r=e.className,c=e.orders,i=Object(d.h)().pathname,s=je(Ne),o=Object(a.useRef)(null),l=((null===(t=o.current)||void 0===t?void 0:t.offsetWidth)||0)<=600?"small":"middle";return Object(p.jsx)("ul",{className:O()(he.a.orders,"mt-9 custom-scroll",r,(n={},Object(V.a)(n,he.a.indent_middle,"middle"===l),Object(V.a)(n,he.a.indent_small,"small"===l),n)),ref:o,children:c&&c.map((function(e){return Object(p.jsx)(De,{order:e,list:s,size:l,pachName:i},e._id)}))})})),Ge=function(e){return!!e.order.orderDetailsRequest},Le=function(e){return e.order.orderDetails},Ae=function(e){return e.order.orders||[]},Fe=function(e){return e.order.isShowOrderDetails},We=function(e){return e.order.burgerIngredient},we=function(e){var t=e.order;return{total:t.total,totalToday:t.totalToday,orders:t.orders}},Me=function(){var e=Object(d.g)(),t=Object(d.h)().state,n=Object(d.j)(),r=n.url,c=n.path,i=je(we).orders,s=void 0===i?[]:i;return Object(a.useEffect)((function(){t&&!X(t,r)&&e.replace({state:[].concat(Object(u.a)(t),[{path:c,url:r,title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}])})}),[c,r,t,e]),Object(p.jsx)(ke,{className:xe.a.orders,orders:s})},Ue=["redirectTo","path"],Pe=function(e){var t=e.redirectTo,n=(e.path,Object(R.a)(e,Ue)),r=je(_e),a=Object(d.h)().state;return r?Object(p.jsx)(d.b,Object(T.a)({},n)):Object(p.jsx)(d.a,{to:{pathname:t,state:a}})},Be={created:"\u0421\u043e\u0437\u0434\u0430\u043d",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"};!function(e){e.BUN="bun",e.SAUSE="sauce",e.MAIN="main"}(ie||(ie={}));var ze,He=n(27),Qe=n.n(He),qe=function(e){var t=e.isTitle,n=void 0===t||t,r=e.order,c=r.ingredients,i=r.name,s=r.status,o=r.number,l=r.createdAt,d=je(Ne),u=Object(a.useMemo)((function(){return function(e,t){var n=t.reduce((function(t,n){return t[n]?t[n].count+=1:t[n]=Object(T.a)(Object(T.a)({},e[n]),{},{count:e[n].type===ie.BUN?2:1}),t}),{});return Object.values(n)}(d,c)}),[d,c]),j=Object(a.useMemo)((function(){return function(e){return e.reduce((function(e,t){return e+t.price*t.count}),0)}(u)}),[u]);return Object(p.jsxs)("div",{className:Qe.a.details,children:[n&&Object(p.jsxs)("p",{className:O()("text text_type_digits-default mt-30",Qe.a.number),children:["#",o]}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-10",children:i}),Object(p.jsx)("p",{className:"text text_type_main-default mt-3",children:Be[s]}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("ul",{className:O()(Qe.a.list,"mt-6 mb-10 mr-6 custom-scroll"),children:u.map((function(e,t){return Object(p.jsxs)("li",{className:Qe.a.item,children:[Object(p.jsx)(Ce,{src:e.image}),Object(p.jsx)("p",{className:"text text_type_main-default",children:e.name}),Object(p.jsxs)("div",{className:Qe.a.price,children:[Object(p.jsxs)("p",{className:"text text_type_digits-default",children:[e.count," x ",e.price]}),Object(p.jsx)(_.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(p.jsxs)("div",{className:Qe.a.footer,children:[Object(p.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:[" ","".concat(ve()(l).calendar()," i-GMT+3")]}),Object(p.jsxs)("div",{className:Qe.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-default",children:j}),Object(p.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},Je=n(57),Xe=n.n(Je),Ve=n(80),Ye=n.n(Ve),Ze=function(e){var t=e.children,n=e.onClose;return Object(p.jsx)("div",{className:Ye.a.overlay,onClick:function(e){var t;(t=e.target)&&t.classList.contains(Ye.a.overlay)&&n()},children:t})},Ke=function(e){var t=e.children,n=e.title,r=void 0===n?"":n,c=e.typeTitle,i=void 0===c?"string":c,o=e.onClose,l=Object(a.useCallback)((function(e){var t=e.key,n=e.keyCode;"Escape"!==t&&27!==n||o()}),[o]);return Object(a.useEffect)((function(){return document.addEventListener("keydown",l),function(){return document.removeEventListener("keydown",l)}}),[l]),Object(s.createPortal)(Object(p.jsx)(Ze,{onClose:o,children:Object(p.jsxs)("div",{className:O()("p-10",Xe.a.modal),children:[Object(p.jsxs)("div",{className:Xe.a.header,children:[Object(p.jsx)("p",{className:O()("text",{"text_type_main-large":"string"===i,"text_type_digits-default":"number"===i}),children:r}),Object(p.jsx)("button",{className:Xe.a.button,onClick:function(){return o()},children:Object(p.jsx)(_.CloseIcon,{type:"primary"})})]}),t]})}),document.getElementById("modal"))};!function(e){e.WS_CONNECTION_INIT="WS_CONNECTION_INIT",e.WS_CONNECTION_START="WS_CONNECTION_START",e.WS_CONNECTION_SUCCESS="WS_CONNECTION_SUCCESS",e.WS_CONNECTION_ERROR="WS_CONNECTION_ERROR",e.WS_CONNECTION_CLOSED="WS_CONNECTION_CLOSED",e.WS_GET_MESSAGE="WS_GET_MESSAGE",e.WS_SEND_MESSAGE="WS_SEND_MESSAGE",e.WS_CLOSE="WS_CLOSE"}(ze||(ze={}));var $e,et=function(e){return{type:ze.WS_CONNECTION_START,payload:e}},tt=function(){return{type:ze.WS_CONNECTION_CLOSED}},nt=function(){var e=Object(d.i)().id;return je(Ae).find((function(t){return t._id===e}))},rt=function(){var e=ue(),t=Object(d.g)(),n=Object(d.h)().state,c=nt(),i=!!(null===n||void 0===n?void 0:n.length);return Object(a.useEffect)((function(){var t=(w("accessToken")||"").replace("Bearer ","");return e(et("".concat(F,"?token=").concat(t))),function(){e(tt())}}),[e]),Object(p.jsx)(y,{children:Object(p.jsxs)("section",{className:re.a.profile,children:[i&&Object(p.jsx)(Oe,{}),Object(p.jsxs)(d.d,{children:[Object(p.jsx)(Pe,{path:r.PROFILE,redirectTo:r.LOGIN,component:me,exact:!0}),Object(p.jsx)(Pe,{render:function(){return i?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Me,{}),c&&Object(p.jsx)(Ke,{onClose:function(){return t.goBack()},title:c.number,typeTitle:"number",children:Object(p.jsx)(qe,{order:c,isTitle:!1})})]}):c?Object(p.jsx)(qe,{order:c}):null},path:[r.PROFILE_ORDERS,r.PROFILE_ORDERS_ID],redirectTo:r.LOGIN,exact:!0}),Object(p.jsx)(Pe,{path:r.PROFILE_ORDERS_ID,redirectTo:r.LOGIN,component:qe,exact:!0})]})]})})},at=n(113),ct=n.n(at),it=function(){var e=Object(d.g)();return Object(p.jsxs)("div",{className:ct.a.block,children:[Object(p.jsx)("p",{className:"text text_type_main-large",children:"404 Not fount"}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-5",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(p.jsx)(_.Button,{type:"secondary",size:"large",onClick:function(){return e.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})},st=["redirectTo"],ot=function(e){var t=e.redirectTo,n=Object(R.a)(e,st),r=Object(i.c)(_e),a=Object(d.h)().state,c=Array.isArray(a)?a.find((function(e){return e.isRedirect})):null;return r?Object(p.jsx)(d.a,{to:{pathname:c?c.url:t,state:c?[c]:[]}}):Object(p.jsx)(d.b,Object(T.a)({},n))},lt=n(44),dt=n.n(lt),ut=function(e){var t=e.className,n=e.isTitle,a=void 0!==n&&n,c=Object(d.g)(),i=Object(d.i)().id,s=je(function(e){return function(t){return t.ingredient.ingredients.find((function(t){return t._id===e}))}}(i))||{},o=s.image,l=s.name,u=s.fat,j=s.calories,_=s.carbohydrates,b=s.proteins;return l||c.push(r.NOT_FOUNT),Object(p.jsxs)("div",{className:O()(t,dt.a.modal),children:[a&&Object(p.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)("img",{className:O()("pl-5 pr-5",dt.a.image),src:o,alt:l}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8",children:l}),Object(p.jsxs)("ul",{className:dt.a.nutritional,children:[Object(p.jsxs)("li",{className:dt.a.nutritionalItem,children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:j})]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:b})]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:u})]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(p.jsx)("p",{className:"text text_type_digits-default",children:_})]})]})]})},jt=n(114),Ot=n.n(jt),_t=n.p+"static/media/done.1ada0a6a.svg",bt=function(){var e=(je(Le)||{}).number;return Object(p.jsxs)("div",{className:Ot.a.modal,children:[Object(p.jsx)("p",{className:"text text_type_digits-large",children:e}),Object(p.jsx)("p",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{className:"mt-15 mb-15",src:_t,alt:"\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(p.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-2 mb-20",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043a\u0430\u0437\u0430 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},mt=n(115),pt=n.n(mt),xt=n(217),ft=n(119),ht=n(45),Et=n.n(ht),Nt=n(218),gt=n(81),vt=n.n(gt),yt=n(219);!function(e){e.INGREDIENT="ingredient",e.SORT="sort"}($e||($e={}));var It,St=function(e){var t=e.ingredient,n=e.index,r=e.onDelete,c=e.onMove,i=Object(a.useRef)(null),s=t.name,o=t.image,l=t.price,d=t.id,u=function(e,t,n,r){var a=Object(Nt.a)({accept:$e.SORT,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(n,a){var c;if(e.current){var i=n.index,s=t;if(i!==s){var o=null===(c=e.current)||void 0===c?void 0:c.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=a.getClientOffset(),u=((null===d||void 0===d?void 0:d.y)||0)-o.top;i<s&&u<l||i>s&&u>l||(r(i,s),n.index=s)}}}}),c=Object(Y.a)(a,2),i=c[0].handlerId,s=c[1],o=Object(yt.a)({type:$e.SORT,item:function(){return{id:n,index:t}},collect:function(e){return{isDragging:e.isDragging()}}}),l=Object(Y.a)(o,2),d=l[0].isDragging?0:1;return(0,l[1])(s(e)),{opacity:d,handlerId:i}}(i,n,d,c),j=u.opacity,O=u.handlerId;return Object(p.jsxs)("li",{className:vt.a.ingredient,ref:i,"data-handler-id":O,style:{opacity:j},children:[Object(p.jsx)("button",{className:vt.a.button,type:"button",children:Object(p.jsx)(_.DragIcon,{type:"primary"})}),Object(p.jsx)(_.ConstructorElement,{text:s,price:l,thumbnail:o,handleClose:function(){return r(d)}})]})};!function(e){e.WS_GET_ORDERS="WS_GET_ORDERS",e.WS_ERROR_ORDERS="WS_ERROR_ORDERS",e.WS_SET_ORDERS="WS_SET_ORDERS",e.CREATE_ORDER_REQUEST="CREATE_ORDER_REQUEST",e.CREATE_ORDER_SUCCESS="CREATE_ORDER_SUCCESS",e.CREATE_ORDER_FAILED="CREATE_ORDER_FAILED",e.ADD_INGREDIENT="ADD_INGREDIENT",e.DELETE_INGREDIENT="DELETE_INGREDIENT",e.MOVE_INGREDIENT="MOVE_INGREDIENT",e.HIDE_DETAILS_ORDER_MODAL="HIDE_DETAILS_ORDER_MODAL"}(It||(It={}));var Tt,Rt=function(){return{type:It.CREATE_ORDER_REQUEST}},Ct=function(e){return{type:It.CREATE_ORDER_SUCCESS,payload:e}},Dt=function(){return{type:It.CREATE_ORDER_FAILED}},kt=function(e){return{type:It.ADD_INGREDIENT,payload:e}},Gt=function(e){return{type:It.DELETE_INGREDIENT,payload:e}},Lt=function(e){return{type:It.MOVE_INGREDIENT,payload:e}},At=function(){return{type:It.HIDE_DETAILS_ORDER_MODAL}},Ft=function(){var e=ue(),t=Object(d.g)(),n=Object(a.useCallback)((function(t){e(function(e){return function(t){t(Rt()),P(e).then((function(e){var n=e.order,r=e.name;return t(Ct(Object(T.a)(Object(T.a)({},n),{},{name:r})))})).catch((function(){return t(Dt())}))}}(t))}),[e]),c=je(We),i=je(Ge),s=c.length&&"bun"===c[0].type?c[0]:null,o=c.reduce((function(e,t){return e+t.price*("bun"===t.type?2:1)}),0),l=je(_e),u=Object(Nt.a)({accept:$e.INGREDIENT,drop:function(t){e(kt(t))}}),j=Object(Y.a)(u,2)[1],b=Object(a.useCallback)((function(){l?n(c.map((function(e){return e._id}))):t.push(r.LOGIN)}),[c,n,l,t]),m=Object(a.useCallback)((function(t){e(Gt(t))}),[e]),x=Object(a.useCallback)((function(t,n){e(Lt({dragIndex:t,hoverIndex:n}))}),[e]);return Object(p.jsxs)("section",{"data-test-id":"burger-constructor",className:"pr-4 pr-4 mt-25",ref:j,children:[s&&Object(p.jsx)("div",{className:"ml-8",children:Object(p.jsx)(_.ConstructorElement,{type:"top",text:s.name+" (\u0432\u0435\u0440\u0445)",price:s.price,isLocked:!0,thumbnail:s.image})}),c&&c.length?Object(p.jsx)("ul",{className:O()("custom-scroll",Et.a.components),children:c.map((function(e,t){return s&&!t?null:Object(p.jsx)(St,{index:t,ingredient:e,onDelete:m,onMove:x},e.id)}))}):Object(p.jsx)("div",{className:Et.a.empty,children:Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u044b\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430."})}),s&&Object(p.jsx)("div",{className:"ml-8",children:Object(p.jsx)(_.ConstructorElement,{type:"bottom",text:s.name+" (\u043d\u0438\u0437)",price:s.price,isLocked:!0,thumbnail:s.image})}),Object(p.jsxs)("div",{className:O()("mr-4 mt-10",Et.a.constructor__footer),children:[Object(p.jsxs)("div",{className:O()("mr-10",Et.a.sum),children:[Object(p.jsx)("p",{className:"text text_type_digits-medium mr-2",children:o}),Object(p.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)(_.Button,{type:"primary",size:"large",onClick:b,disabled:i||!c.find((function(e){return"bun"===e.type})),children:i?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Wt=n(46),wt=n.n(Wt),Mt=[{name:"\u0411\u0443\u043b\u043a\u0438",value:ie.BUN},{name:"\u0421\u043e\u0443\u0441\u044b",value:ie.SAUSE},{name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",value:ie.MAIN}];!function(e){e.GET_INGREDIENTS_REQUEST="GET_INGREDIENTS_REQUEST",e.GET_INGREDIENTS_SUCCESS="GET_INGREDIENTS_SUCCESS",e.GET_INGREDIENTS_FAILED="GET_INGREDIENTS_FAILED",e.TAB_SWITCH_INGREDIENTS="TAB_SWITCH_INGREDIENTS"}(Tt||(Tt={}));var Ut=function(){return{type:Tt.GET_INGREDIENTS_REQUEST}},Pt=function(e){return{type:Tt.GET_INGREDIENTS_SUCCESS,payload:e}},Bt=function(){return{type:Tt.GET_INGREDIENTS_FAILED}},zt=function(e){return{type:Tt.TAB_SWITCH_INGREDIENTS,payload:e}},Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=Object(a.useRef)(null);return Object(a.useCallback)((function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];clearTimeout(n.current),"number"===typeof t&&(n.current=setTimeout((function(){return e.apply(void 0,a)}),t))}),[t,e])},Qt=n(58),qt=n.n(Qt),Jt=function(e){var t=e.ingredients,n=e.ingredient,r=e.onSelect,a=n._id,c=n.image,i=n.price,s=n.name,o="bun"===n.type,l=t.filter((function(e){return e._id===a})).length||!1,d=Object(yt.a)({type:$e.INGREDIENT,item:n,collect:function(e){return{opacity:e.isDragging()?.5:1}}}),u=Object(Y.a)(d,2),j=u[0].opacity,b=u[1];return Object(p.jsxs)("li",{className:qt.a.card,onClick:function(){return r(n)},ref:b,style:{opacity:j},children:[l&&Object(p.jsx)(_.Counter,{count:o?l+1:l,size:"default"}),Object(p.jsx)("img",{className:O()("pl-4 pr-4",qt.a.image),src:c,alt:s}),Object(p.jsxs)("div",{className:qt.a.price,children:[Object(p.jsx)("p",{className:"text text_type_digits-default mr-2",children:i}),Object(p.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("p",{className:"text text_type_main-default mt-1",children:s})]})},Xt=function(){var e=Object(d.g)(),t=ue(),n=je(Ee),r=n.currentTabIngredients,c=n.ingredients,i=je(We),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bun",n=Object(a.useRef)(null),r=Object(a.useCallback)((function(){if(!(null===n||void 0===n?void 0:n.current))return[];var e=Array.from(n.current.querySelectorAll('[data-type="tab-item"]'));if(!e.length)return[];for(var t=0,r=[],a=0;a<e.length;a++){var c=e[a];c instanceof HTMLElement&&(r.push({start:t,end:c.offsetHeight+t,name:c.id}),t+=c.offsetHeight)}return r}),[n]),c=Object(a.useCallback)((function(n){var a=(r().find((function(e){var t=e.start,r=e.end;return t<=n&&r>=n}))||{}).name;e(void 0===a?t:a)}),[r,t,e]),i=Object(a.useCallback)((function(e){var t=e.target.scrollTop;c(t)}),[c]),s=Ht(i,300),o=Object(a.useCallback)((function(a){if(n.current){var c=r().find((function(e){var t=e.name;return a===t}))||{},i=c.name,s=void 0===i?t:i,o=c.start,l=void 0===o?0:o;n.current.scrollTop=l+10,e(s)}}),[r,n,e,t]);return Object(a.useEffect)((function(){var e=null===n||void 0===n?void 0:n.current;return e&&e.addEventListener("scroll",s),function(){e&&e.removeEventListener("scroll",s)}}),[n,s]),[n,o]}(Object(a.useCallback)((function(e){return t(zt(e))}),[t])),o=Object(Y.a)(s,2),l=o[0],u=o[1];return Object(p.jsxs)("section",{children:[Object(p.jsx)("nav",{className:wt.a.tabs,children:Mt.map((function(e){var t=e.name,n=e.value;return Object(p.jsx)(_.Tab,{value:n,active:r===n,onClick:function(){return u(n)},children:t},n)}))}),Object(p.jsx)("ul",{className:O()("custom-scroll",wt.a.ingredients__list),ref:l,children:Mt.map((function(t){var n=t.name,r=t.value;return Object(p.jsxs)("li",{"data-type":"tab-item",className:O()("pt-10",wt.a.ingredients__item),id:r,children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:n}),Object(p.jsx)("ul",{className:O()("pl-4 pr-2",wt.a.cards),children:c&&c.filter((function(e){return r===e.type})).map((function(t){return Object(p.jsx)(Jt,{ingredients:i,ingredient:t,onSelect:function(){return e.push({pathname:"/ingredient/".concat(t._id),state:[{path:"/ingredient/".concat(t._id),url:"/ingredient/".concat(t._id),title:t.name}]})}},t._id)}))})]},r)}))})]})},Vt=n(83),Yt=n.n(Vt),Zt=function(e){var t=e.title,n=e.children;return Object(p.jsxs)("main",{className:Yt.a.main,children:[Object(p.jsx)("h2",{className:"text text_type_main-large mt-10 mb-5",children:t}),Object(p.jsx)("section",{className:Yt.a.middle,children:n})]})},Kt=function(){return Object(p.jsx)(Zt,{title:"\u0421\u043e\u0431\u0435\u0440\u0438 \u0431\u0443\u0440\u0433\u0435\u0440",children:Object(p.jsxs)(xt.a,{backend:ft.a,children:[Object(p.jsx)(Xt,{}),Object(p.jsx)(Ft,{})]})})},$t=function(){var e=ue(),t=Object(d.g)(),n=je(Fe),c=Object(d.h)().state,i=!!(null===c||void 0===c?void 0:c.length),s=Object(a.useCallback)((function(){return e(At())}),[e]);return Object(p.jsxs)(y,{children:[Object(p.jsx)(d.b,{path:r.HOME,component:Kt,exact:!0}),Object(p.jsx)(d.b,{render:function(){return i?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Kt,{}),Object(p.jsx)(Ke,{onClose:function(){return t.goBack()},title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",children:Object(p.jsx)(ut,{})})]}):Object(p.jsx)(ut,{className:pt.a.details,isTitle:!0})},path:r.INGREDIENT_ID,exact:!0}),n&&Object(p.jsx)(Ke,{onClose:s,children:Object(p.jsx)(bt,{})})]})},en=n(36),tn=n.n(en),nn=function(){var e=ue(),t=Object(d.g)(),n=Object(d.h)().state,c=Object(d.j)(),i=c.url,s=c.path,o=Z(),j=o.values,b=o.handleChange,m=Object(a.useCallback)((function(t){var n;t.preventDefault(),e((n=j,function(e){Q(n).then((function(t){var n=t.user,r=t.accessToken,a=t.refreshToken;if(!t.success)return Promise.reject("error");M("accessToken",r,{expires:600}),localStorage.setItem("refreshToken",a),e(oe(n))})).catch((function(){return e(le())}))}))}),[j,e]);return Object(a.useEffect)((function(){n&&X(n,i)||t.replace({state:[].concat(Object(u.a)(n||[]),[{path:s,url:i,title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}])})}),[s,i,n,t]),Object(p.jsxs)(y,{children:[Object(p.jsxs)(G,{onSubmit:m,children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(_.Input,{type:"email",placeholder:"E-mail",name:"email",value:j.email||"",onChange:b}),Object(p.jsx)(_.PasswordInput,{name:"password",value:j.password||"",onChange:b}),Object(p.jsx)("div",{children:Object(p.jsx)(_.Button,{type:"primary",size:"medium",htmlType:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(p.jsxs)("div",{className:tn.a.footer,children:[Object(p.jsxs)("div",{className:tn.a.paragraph,children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-1",children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(p.jsx)(l.b,{className:O()("text text_type_main-default",tn.a.link),to:r.REGISTER,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("div",{className:O()(tn.a.paragraph,"mt-4"),children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-1",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(p.jsx)(l.b,{className:O()("text text_type_main-default",tn.a.link),to:{pathname:r.FORGOT_PASSWORD,state:n},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return e.filter((function(e){return e.status===t})).filter((function(e,t){return t<n}))},an=n(85),cn=n.n(an),sn=Object(a.memo)((function(e){var t=e.list,n=e.color;return Object(p.jsx)("ul",{className:cn.a.list,children:t.map((function(e){var t=e.number;return Object(p.jsx)("li",{children:Object(p.jsx)("p",{className:O()("text text_type_digits-default",Object(V.a)({},cn.a.success,n)),children:t})},t)}))})})),on=function(e){var t=e.label,n=e.total;return Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(p.jsx)("p",{className:"text text_type_digits-large",children:n})]})},ln=n(86),dn=n.n(ln),un=Object(a.memo)((function(e){var t=e.orders,n=e.total,r=e.totalToday,c=Object(a.useMemo)((function(){return rn(t,"done")}),[t]),i=Object(a.useMemo)((function(){return rn(t,"pending")}),[t]);return Object(p.jsxs)("div",{className:dn.a.block,children:[Object(p.jsxs)("div",{className:dn.a.info,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)(sn,{list:c,color:"success"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsx)(sn,{list:i})]})]}),Object(p.jsx)(on,{total:n,label:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(p.jsx)(on,{total:r,label:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"})]})})),jn=function(){var e=je(we),t=e.orders,n=e.total,r=e.totalToday;return Object(p.jsxs)(Zt,{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",children:[Object(p.jsx)(ke,{orders:t}),Object(p.jsx)(un,{totalToday:r,total:n,orders:t})]})},On=function(){var e=ue(),t=Object(d.g)(),n=Object(d.h)().state,c=!!(null===n||void 0===n?void 0:n.length),i=nt();return Object(a.useEffect)((function(){return e(et("".concat(F,"/all"))),function(){e(tt())}}),[e]),Object(p.jsx)(y,{children:Object(p.jsx)(d.d,{children:Object(p.jsx)(d.b,{render:function(){return c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(jn,{}),i&&Object(p.jsx)(Ke,{onClose:function(){return t.goBack()},title:i.number,typeTitle:"number",children:Object(p.jsx)(qe,{order:i,isTitle:!1})})]}):i?Object(p.jsx)(qe,{order:i}):null},path:[r.FEED,r.FEED_ID],exact:!0})})})},_n=function(){return je(be)?Object(p.jsx)(l.a,{children:Object(p.jsxs)(d.d,{children:[Object(p.jsx)(ot,{component:nn,path:r.LOGIN,redirectTo:r.HOME}),Object(p.jsx)(ot,{component:$,path:r.REGISTER,redirectTo:r.HOME}),Object(p.jsx)(ot,{component:ee,path:r.FORGOT_PASSWORD,redirectTo:r.HOME}),Object(p.jsx)(ot,{component:te,path:r.RESET_PASSWORD,redirectTo:r.HOME}),Object(p.jsx)(Pe,{component:rt,path:[r.PROFILE,r.PROFILE_ORDERS,r.PROFILE_ORDERS_ID],redirectTo:r.LOGIN,exact:!0}),Object(p.jsx)(d.b,{component:$t,path:[r.HOME,r.INGREDIENT_ID],exact:!0}),Object(p.jsx)(d.b,{component:On,path:[r.FEED,r.FEED_ID],exact:!0}),Object(p.jsx)(d.b,{component:it})]})}):Object(p.jsx)(E,{})},bn=n(118),mn=n(31),pn={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,isShowIngredientDetails:!1,currentTabIngredients:ie.BUN},xn={user:null,isInitialized:!1},fn=n(87),hn=n.n(fn),En=n(117),Nn={ordersLoading:!1,ordersFailed:!1,orders:[],error:null,total:0,totalToday:0,orderDetails:{},orderDetailsRequest:!1,orderDetailsFailed:!1,burgerIngredient:[],isShowOrderDetails:!1},gn={wsConnected:!1,messages:[]},vn=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||mn.c,yn=Object(mn.b)({ingredient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Tt.GET_INGREDIENTS_REQUEST:return Object(T.a)(Object(T.a)({},e),{},{ingredientsRequest:!0});case Tt.GET_INGREDIENTS_SUCCESS:return Object(T.a)(Object(T.a)({},e),{},{ingredientsFailed:!1,ingredients:t.payload,ingredientsRequest:!1});case Tt.GET_INGREDIENTS_FAILED:return Object(T.a)(Object(T.a)({},e),{},{ingredientsFailed:!0,ingredientsRequest:!1});case Tt.TAB_SWITCH_INGREDIENTS:return Object(T.a)(Object(T.a)({},e),{},{currentTabIngredients:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.INIT_USER:return Object(T.a)(Object(T.a)({},e),{},{isInitialized:!1});case K.LOGIN:return Object(T.a)(Object(T.a)({},e),{},{isInitialized:!0,user:t.payload});case K.LOGOUT:return Object(T.a)(Object(T.a)({},e),{},{isInitialized:!0,user:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It.WS_GET_ORDERS:return Object(T.a)(Object(T.a)({},e),{},{ordersLoading:!0});case It.WS_SET_ORDERS:var n=t.payload,r=n.orders,a=n.total,c=n.totalToday;return Object(T.a)(Object(T.a)({},e),{},{total:a,totalToday:c,orders:r,ordersLoading:!1});case It.CREATE_ORDER_REQUEST:return Object(T.a)(Object(T.a)({},e),{},{orderDetailsRequest:!0});case It.WS_ERROR_ORDERS:return Object(T.a)(Object(T.a)({},e),{},{error:t.payload,ordersLoading:!1});case It.CREATE_ORDER_SUCCESS:return Object(T.a)(Object(T.a)({},e),{},{orderDetailsRequest:!1,orderDetailsFailed:!1,burgerIngredient:[],orderDetails:t.payload,isShowOrderDetails:!0});case It.CREATE_ORDER_FAILED:return Object(T.a)(Object(T.a)({},e),{},{orderDetailsRequest:!1,orderDetailsFailed:!0});case It.ADD_INGREDIENT:var i=Object(T.a)(Object(T.a)({},t.payload),{},{id:+new Date}),s=e.burgerIngredient,o="bun"===i.type&&s.length?"bun"===s[0].type?s.map((function(e,t){return 0===t?i:e})):[i].concat(Object(u.a)(s)):[].concat(Object(u.a)(s),[i]);return Object(T.a)(Object(T.a)({},e),{},{burgerIngredient:o});case It.DELETE_INGREDIENT:return Object(T.a)(Object(T.a)({},e),{},{burgerIngredient:e.burgerIngredient.filter((function(e){return e.id!==t.payload}))});case It.MOVE_INGREDIENT:var l=t.payload,d=l.dragIndex,j=l.hoverIndex,O=Object(u.a)(e.burgerIngredient),_=O[d];return O[d]=O[j],O[j]=_,Object(T.a)(Object(T.a)({},e),{},{burgerIngredient:O});case It.HIDE_DETAILS_ORDER_MODAL:return Object(T.a)(Object(T.a)({},e),{},{isShowOrderDetails:!1,orderDetails:{}});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze.WS_CONNECTION_SUCCESS:return Object(T.a)(Object(T.a)({},e),{},{wsConnected:!0});case ze.WS_CONNECTION_CLOSED:return Object(T.a)(Object(T.a)({},e),{},{wsConnected:!1});case ze.WS_GET_MESSAGE:return Object(T.a)(Object(T.a)({},e),{},{messages:[].concat(Object(u.a)(e.messages),[t.payload])});default:return e}}}),In=function(e){return function(t){var n=null;return function(r){return function(a){var c=t.dispatch,i=e.onInit,s=e.onStart,o=e.onOpen,l=e.onMessage,d=e.onError,u=e.onClose,j=e.onClosed,O=e.onSend;switch(a.type){case s:c({type:i}),(n=new WebSocket(a.payload))&&(n.onopen=function(){c({type:o})},n.onerror=function(e){c({type:d,payload:e})},n.onmessage=function(e){var t=e.data,n=JSON.parse(t);c({type:l,payload:n})},n.onclose=function(e){c({type:j,payload:e})});break;case O:if(n){var _=a.payload;n.send(JSON.stringify(_))}break;case u:n&&n.close();break;default:r(a)}}}}}({onInit:It.WS_GET_ORDERS,onStart:ze.WS_CONNECTION_START,onOpen:ze.WS_CONNECTION_SUCCESS,onMessage:It.WS_SET_ORDERS,onError:It.WS_ERROR_ORDERS,onClose:ze.WS_CLOSE,onClosed:ze.WS_CONNECTION_CLOSED,onSend:ze.WS_SEND_MESSAGE}),Sn=vn(Object(mn.a)(bn.a,In)),Tn=Object(mn.d)(yn,Sn);Tn.dispatch(function(){var e=Object(En.a)(hn.a.mark((function e(t){var n,r,a,c,i,s,o,l;return hn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(se()),t(Ut()),n=w("accessToken")||"",r=localStorage.getItem("refreshToken")||"",e.next=6,H().then((function(e){var n=e.success,r=e.data;return t(Pt(n?r:[]))})).catch((function(){return t(Bt())}));case 6:if(e.prev=6,r){e.next=9;break}return e.abrupt("return",t(le()));case 9:if(n){e.next=19;break}return e.next=12,U({token:r});case 12:if(a=e.sent,c=a.success,i=a.accessToken,c){e.next=17;break}throw new Error("NOT");case 17:n=i,M("accessToken",i,{expires:600});case 19:return e.next=21,J(n);case 21:if(s=e.sent,o=s.success,l=s.user,o){e.next=26;break}throw new Error("NOT");case 26:t(oe(l)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(6),t(le());case 32:case"end":return e.stop()}}),e,null,[[6,29]])})));return function(t){return e.apply(this,arguments)}}()),o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(i.a,{store:Tn,children:Object(p.jsx)(_n,{})})}),document.getElementById("root"))},22:function(e,t,n){e.exports={header:"header_header__2IRlc",header__content:"header_header__content__1Q8OF",menu:"header_menu__2rFKX",link:"header_link__1pBqM",active:"header_active__2k5wP"}},23:function(e,t,n){e.exports={order:"order-item_order__3o6M5",link:"order-item_link__2bvfp",header:"order-item_header__1nFOC",footer:"order-item_footer__1p4QC",price:"order-item_price__1eXpf",indent:"order-item_indent__2IjuT",ingredients:"order-item_ingredients__rokM8",hidden:"order-item_hidden__14TTk"}},27:function(e,t,n){e.exports={details:"feed-details_details__3lr58",list:"feed-details_list__16PbC",item:"feed-details_item__3XpuS",price:"feed-details_price__2m7Z4",number:"feed-details_number__QCDWr",footer:"feed-details_footer__E7BSC"}},35:function(e,t,n){e.exports={avatar:"ingredient-avatar_avatar__32w4C",image:"ingredient-avatar_image__UXBgI",background:"ingredient-avatar_background__1agYX",count:"ingredient-avatar_count__1DbHr",last:"ingredient-avatar_last__1uJA-"}},36:function(e,t,n){e.exports={footer:"login_footer__2Hvi3",paragraph:"login_paragraph__1D22k",link:"login_link__2bcVJ"}},41:function(e,t,n){e.exports={profile:"profile_profile__26YER",form:"profile_form__3yKlC",footer:"profile_footer__dPUqU"}},44:function(e,t,n){e.exports={modal:"ingredient-details_modal__1XiC-",image:"ingredient-details_image__H2-xP",nutritional:"ingredient-details_nutritional__2Qt4z",nutritionalItem:"ingredient-details_nutritionalItem__xf-Ae"}},45:function(e,t,n){e.exports={components:"burger-constructor_components__10ND2",component:"burger-constructor_component__acrLz",button:"burger-constructor_button__3bxLu",constructor__footer:"burger-constructor_constructor__footer__3lJeR",sum:"burger-constructor_sum__487I2",empty:"burger-constructor_empty__P50O1"}},46:function(e,t,n){e.exports={tabs:"burger-ingredients_tabs__1yNyE",ingredients__list:"burger-ingredients_ingredients__list__2rRB8",cards:"burger-ingredients_cards__xIjNZ",card:"burger-ingredients_card__61Bte",price:"burger-ingredients_price__3WIPw",image:"burger-ingredients_image__2RFFn"}},56:function(e,t,n){e.exports={orders:"order-list_orders__O4Ym0",indent_small:"order-list_indent_small__31icI",indent_middle:"order-list_indent_middle__1YbfI"}},57:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r",button:"modal_button__3_zvg"}},58:function(e,t,n){e.exports={cards:"burger-ingredient_cards___GQOo",card:"burger-ingredient_card__N9j0Q",price:"burger-ingredient_price__1VUFu",image:"burger-ingredient_image__2ZmDI"}},80:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},81:function(e,t,n){e.exports={ingredient:"burger-constructor-ingredient_ingredient__1FIc6",button:"burger-constructor-ingredient_button__3KHom"}},83:function(e,t,n){e.exports={main:"main_main__2W-l3",middle:"main_middle__2XZLy"}},85:function(e,t,n){e.exports={list:"feed-info-orders_list__6wJZW",success:"feed-info-orders_success__7xsXY"}},86:function(e,t,n){e.exports={info:"feed-info_info__3cFBo",block:"feed-info_block__XQVMX"}}},[[212,1,2]]]);
//# sourceMappingURL=main.523dff13.chunk.js.map